<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Note Compilation</title>
    <link rel="stylesheet" href="./main.css">
</head>
<body>

    <div class="navigation">
        <a href="index.html"><p>HTML</p></a>
        <a href="css.html"><p>CSS</p></a>
        <a href="javascript.html"><p>Javascript</p></a>
        <a href="express.html"><p>Express</p></a>
        <a href="react.html"><p>React</p></a>
        <a href="python.html"><p>Python</p></a>
        <a href="other.html"><p>OTHER</p></a>
    </div>

    <div class="chapter bubble">Chapter 1</div>
    <div class="big green bubble"></div>


    <div class="chapter bubble">Chapter 2</div>
    <div class="big grey bubble"></div>

    <div class="chapter bubble">Chapter 3 - Stripe</div>
    <div class="big orange bubble">
        <p>
            <span class="highlight-note">npm init -y</span><br>
            <span class="highlight-note">npm i --save-dev nodemon</span><br>
            <span class="highlight-note">npm i express stripe dotenv</span><br><br>
            <span class="highlight-note">require('dotenv).config()</span><br>
            <span class="highlight-note">app.use(express.json())</span><br><br>


            const <span class="highlight-red">stripe</span> = require("stripe")(process.ENV.STRIPE_PRIVATE_KEY);<br>
            const <span class="highlight-green">button</span> = document.getElementById('checkout');<br><br>

            <span class="highlight-green">button.addEventListener("click", () => {</span><br><br>
                <span class="highlight-orange">fetch(<span class="highlight-note">'/checkout/path'</span> , {</span><br>
                    method: POST,<br>
                    headers: {"Content-Type":"app/json"},<br>
                    body: JSON.stringify( {items: [ {id: #, quantity: #} ]} )<br>
                    <span class="highlight-orange">})</span><br><br>
                <span class="highlight-green">}).then(</span><span class="highlight-red">res</span> => { if (<span class="highlight-red">res</span>.ok) <span class="highlight-blue">return</span> <span class="highlight-red">res</span>.json() } <span class="highlight-green">).then(</span>({<span class="highlight-red">url</span>}) => { window.location = <span class="highlight-red">url</span> }<span class="highlight-green">)</span><br><br>

            app.post(<span class="highlight-note">'/checkout/path'</span>, <span class="highlight-blue">async</span> (req, res) => {<br><br>
                <span class="highlight-green">try {</span><br> 
                    const session = <span class="highlight-blue">await</span> stripe.checkout.sessions.create({<br>
                    payment_method_types: ["card"],<br>
                    mode: <span class="highlight-note">"payment or subscription"</span>,<br>
                    success_url: `${process.env.URL}/success.html`,<br>
                    cancel_url: `<span class="highlight-note">...</span>`,<br>
                    line_items: req.body.items.map(<span class="highlight-red">item</span> => <span class="highlight-note">...</span>)
                })<br>
                <span class="highlight-green">}</span><br><br>
            })<br><br>
        </p>
    </div>


    <div class="chapter bubble">Chapter 4</div>
    <div class="big pink bubble"></div>
    
</body>
</html>